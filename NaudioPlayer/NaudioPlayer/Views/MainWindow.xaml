<Window x:Class="NaudioPlayer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:NaudioPlayer"
        xmlns:vm="clr-namespace:NaudioPlayer.ViewModels"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:uc="clr-namespace:NaudioPlayer.Views"
        xmlns:dd="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop"
        mc:Ignorable="d"
        Height="1024" Width="768"
        ResizeMode="NoResize" 
        AllowsTransparency="True" 
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" 
        Background="Transparent"
        MouseDown="Windows_MouseDown"
        >

    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>

    <Border Background="#030303" CornerRadius="20" >
        <!--global layout-->
        <Grid>
            <Grid.RowDefinitions>
                <!--title-->
                <RowDefinition Height="50"/>
                <!--genre-->
                <RowDefinition Height="200"/>
                <!--song list-->
                <RowDefinition Height="*"/>
                 <!--play control-->
                <RowDefinition Height="150" />
            </Grid.RowDefinitions>

            <!--title-->
            <Border Background="#030303" CornerRadius="20 20 0 0 " Grid.RowSpan="1">
                <StackPanel Margin="0 10 0 0">
                    <!--contorl bar-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="left" Margin="20 10 0 10">
                        <Button Background="Transparent" BorderBrush="Transparent" Command="{Binding ExitApplicationCommand}">
                            <Ellipse Fill="#ff6258" Width="15" Height="15"/>
                        </Button>
                        <Button  Margin="7 0 0 0" Background="Transparent" BorderBrush="Transparent" Command="{Binding MinimizeWindowCommand}">
                            <Ellipse Fill="#ffbf2f" Width="15" Height="15"/>
                        </Button>
                    </StackPanel>
                    
                </StackPanel>
            </Border>
            
            <!--genre-->
            <Border Grid.Row="1">
                <uc:MusicGenreSelect/>
            </Border>
            
            <!--song list-->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <Grid Grid.Column="0" Margin="0 10 0 0">
                    <StackPanel>
                        <!--add files-->
                        <RadioButton x:Name="AddFilesRadioButton"  Style="{StaticResource menuRadioButton}">
                            <Grid>
                                <TextBlock Text="新增內容" Margin="0 0 0 2"/>
                                <Icon:PackIconMaterial Style="{StaticResource menuButtonIcon}"/>
                            </Grid>
                        </RadioButton>
                        <StackPanel Visibility="{Binding IsChecked, ElementName=AddFilesRadioButton, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <MenuItem Header="加入檔案" Command="{Binding AddFileToPlaylistCommand}" Style="{StaticResource customMenuItem}" />
                            <MenuItem Header="加入資料夾" Command="{Binding AddFolderToPlaylistCommand}" Style="{StaticResource customMenuItem}" />
                        </StackPanel>
                        <!--playlist-->
                        <RadioButton x:Name="PlaylistRadioButton" Style="{StaticResource menuRadioButton}">
                            <Grid>
                                <TextBlock Text="播放清單" Margin="0 0 0 2"/>
                                <Icon:PackIconMaterial Style="{StaticResource menuButtonIcon}"/>
                            </Grid>
                        </RadioButton>
                        <StackPanel Visibility="{Binding IsChecked, ElementName=PlaylistRadioButton, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <MenuItem Header="儲存播放清單" Command="{Binding SavePlaylistCommand}" Style="{StaticResource customMenuItem}" />
                            <MenuItem Header="載入播放清單" Command="{Binding LoadPlaylistCommand}" Style="{StaticResource customMenuItem}" />
                        </StackPanel>
                        <!--schedule-->
                        <RadioButton x:Name="scheduleRadioButton" Style="{StaticResource menuRadioButton}">
                            <Grid>
                                <TextBlock Text="排程" Margin="0 0 0 2"/>
                                <Icon:PackIconMaterial Style="{StaticResource menuButtonIcon}"/>
                            </Grid>
                        </RadioButton>
                        <StackPanel Visibility="{Binding IsChecked, ElementName=scheduleRadioButton, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <MenuItem Header="開啟排程視窗" Style="{StaticResource customMenuItem}" 
                                          Command="{Binding OpenWeeklyScheduleCommand}"/>

                        </StackPanel>
                    </StackPanel>
                </Grid>

                <ListBox ItemsSource="{Binding Playlist}" 
                         SelectedItem="{Binding CurrentlySelectedTrack}" 
                         Background="#121212"
                         Foreground="White"
                         BorderBrush="Transparent" 
                         Grid.Column="1">

                    <ListBox.Resources>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Height" Value="30"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#333" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#666" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.Resources>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding FriendlyName}" Margin="5" Width="200" />
                                <TextBlock Text="{Binding Number}" Margin="5" Width="50" />
                                <TextBlock Text="{Binding Time}" Margin="5" Width="50" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>

                </ListBox>
            </Grid>

            <Grid Grid.Row="3">
                <uc:MusicPlayControl/>
            </Grid>
        </Grid>
        
    </Border> 
    
    
    
</Window>
